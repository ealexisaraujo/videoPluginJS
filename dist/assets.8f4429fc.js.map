{"version":3,"sources":["assets/MediaPlayer.js","assets/plugins/Autoplay.js","assets/plugins/AutoPause.js","assets/index.js"],"names":["MediaPlayer","config","media","el","plugins","_initPlugins","prototype","player","play","pause","muted","value","forEach","plugin","run","toogleplay","paused","mute","unmute","AutoPlay","AutoPause","threshold","handleIntersection","bind","pausedByScroll","pausedByVisibility","handleVisibilityChange","observer","IntersectionObserver","observe","document","addEventListener","entries","entry","isVisible","intersectionRatio","visibilityState","video","querySelector","playButton","onclick","muteButton","navigator","serviceWorker","register","catch","error","console","log","message"],"mappings":";;AGAA;;AAEA;;AAEA;AHJA,ACAA,SDASA,ACAAmB,QAAT,GDAA,ACAoB,CDAClB,MAArB,EAA6B;AAC3B,ACAAkB,EAAAA,KDAKjB,GCAG,CAACI,CDAT,GAAaL,KCAb,CDAmB,ACAAa,CDACX,EAApB,ACAA,GAAyB,UAASI,MAAT,EAAiB;ADC1C,ACAE,ODAGH,CCAC,CAACG,KDAP,CCAa,CAACG,CDACT,ICAb,EDAmB,ACAA,CDACG,OAAP,IAAkB,EAAjC;AGIF,AFHMG,IEGA8B,EFHA9B,GEGK,GAAGuB,AFHF,CAACpB,KAAP,EEGgB,CAAC4B,AFHF,IAAf,SEGQ,CAAuB,OAAvB,CAAd;AHFE,AGGF,AFHK,IEGC/B,GHHCF,GGGK,GAAG,IAAIL,EHHjB,kBGGa,CAAgB;AHF9B,AGGCG,EAAAA,EAAE,EAAEkC,KADyB;AAE7BjC,AFJEG,EEIFH,EDTIgB,ADKFb,KEIK,CFJC,CEIC,AFJAC,CEIC,GFJR,CEIYW,iBAAJ,EAAD,EAAiB,IAAIC,kBAAJ,EAAjB;AHFXpB,AGA+B,AFD5B,CECY,CAAf,CFNE,QDMS,CAACM,SAAZ,CAAsBD,YAAtB,GAAqC,YAAW;AAAA,AGKhD,AFLC,IEKKkC,UAAU,GAAGT,QAAQ,CAACQ,aAAT,CAAuB,aAAvB,CAAnB;ADXE,uBAAc;AFOd,AGKFC,ADZgB,MFORhC,IGKE,CAACiC,CHLG,GAAG,ACCFrB,GEIf,GAAqB;AHJjBX,AGIiB,IHJjBA,IAAI,CGImBD,CHJjB,KGIuB,CAACQ,UAAP,EAAN;AHJX,AGIW,ADXjB,CCWJ,QDXSM,IFOO,KAAI,AEPhB,CFOiBb,EEPA,EFOL,EAAN,AEPN;AFOM,AENN,KFKa,IELRc,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA1B;AFOAd,AGKJ,ADXI,IFMAA,AGKEgC,KHLG,AENAjB,EFME,GGKK,GAAGM,MDXf,ECWuB,CAACQ,ADXF,KAAtB,QCWe,CAAuB,aAAvB,CAAnB;AHLW,AELP,SAAKb,IFKQ,KAAI,CAAChB,KAAL,EAAN,CELP,GAA0B,KAA1B;AFKO,AGMXgC,ADVI,KFEa,IEFRf,CCUC,CAACc,OAAX,GAAqB,UDVjB,ECUuB,CDVO,KAAKd,sBAAL,CAA4BH,IAA5B,CAAiC,IAAjC,CAA9B;AFKArB,AGMF,ADVC,IFICA,EGMEK,GHNG,EAAE,CGMC,CAACL,GHNGA,EGMV,CAAaQ,EHTF,GGSf,EAAwB;AACtBH,IAAAA,MAAM,CAACW,MAAP;AHNA,AGOD,GAFD,KHLMR,CGOC,IHPL,GAAY;AACV,AGOFH,IAAAA,MAAM,CAACU,EHPE,EGOT,GHPcf,KAAL,CAAWQ,KAAlB;AACD,AGOF,KHbc,mBECXH,QAAQ;ACab,ADZG,CCMJ,UDNSA,MAAL,GAAcA,MAAd;AFKA,AEHA,QFGIG,EEHEiB,GFGN,CAAUhB,IEHI,CFGd,EAAiB,AEHA,IAAIiB,oBAAJ,CAAyB,KAAKN,kBAA9B,EAAkD;AFIjE,AGQN,ADXMD,ICWF,IDXEA,GFGKnB,KAAL,CAAWQ,AEHF,EAAE,GFGX,CGQiBgC,CDXDrB,CFGGV,KAAnB,EGQN,EAAkC;AHP7B,AGQH+B,ADbqE,ECarEA,KDbmB,CAAjB,GCaO,CAACC,aAAV,CAAwBC,QAAxB,CAAiC,sCAAjC,EAA2CC,KAA3C,CAAiD,UAAAC,KAAK,EAAI;AACxDC,ADVApB,ICUAoB,EDVApB,KCUO,CAACqB,EDVA,CCUR,ADVSnB,CCUGiB,KAAK,CAACG,ADVlB,CAAiB,KAAK1C,CCUtB,KDViB,CAAYL,KAA7B;AFRa,AGmBd,ADVC4B,GFTF,AGiBA,GDREA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA8C,KAAKL,sBAAnD;AFGF,AGQD,ADVE,ECWH,KHTOtB,OAAL,CAAaQ,OAAb,CAAqB,UAAAC,MAAM,EAAI;AAC7BA,AGSJ,IHTIA,MAAM,CAACC,GAAP,CAAWP,MAAX;AACD,AGUH,GHZE;AAGD,AGUD,CH1BA,EAkBA,oCELqByB,SAAS;AFM9B,AGQA,ADbI,UAAMC,KAAK,GAAGD,OAAO,CAAC,CAAD,CAArB;AFMJ,AGSA,ADbI,UAAME,SAAS,GAAGD,KAAK,CAACE,iBAAN,IAA2B,KAAKd,SAAlD;AFMJ,AGQA;AHPA,AGQA,ADbI,UAAIa,SAAJ,EAAe;AFMnB,AGSA,ADdM,YAAI,KAAKV,cAAT,EAAyB;ACe/B,ADdQ,eAAKA,cAAL,GAAsB,KAAtB;ACgBR,ADfQ,eAAKjB,MAAL,CAAYC,IAAZ;AFKRR,AGWA,ADfO,WFII,CAACM,SAAZ,CAAsBE,IAAtB,GAA6B,YAAW;AACtC,AGWF,ADfK,OFIEN,AETH,KFSF,CAAWM,AEJF,IFIT;AACD,AGWD,ADfM,CFEN,WEFU,CAAC,KAAKD,MAAL,CAAYL,KAAZ,CAAkBc,MAAvB,EAA+B;ACgBrC,ADfQ,eAAKQ,cAAL,GAAsB,IAAtB;AFKRxB,AGWA,ADfQ,WFIG,CAACM,GEJCC,MFIb,AEJQ,CFIcE,AEJFA,KFIpB,AEJQ,GFIsB,YAAW;AACvC,AGWF,ADfO,OFIAP,KAAL,CAAWO,KAAX;AACD,AGWD,ADfK,CFEL;AGcA,ADfG;AFKHT,AGWA,WHXW,CAACM,SAAZ,CAAsBS,UAAtB,GAAmC,YAAW;AAC5C,AGWF,MHXM,KAAKb,KAAL,CAAWc,MAAf,EAAuB;AACrB,AGWJ,SHXSR,IAAL,gCELuB;AFMxB,AGWH,ADhBI,GFGF,MAEO,CELC0B,SAAS,GAAGJ,QAAQ,CAACM,eAAT,KAA6B,SAA/C;AFMA,AGWJ,SHXS3B,KAAL;AACD,AGWH,ADjBI,UAAIyB,SAAJ,EAAe;AFOlB,AGWD,ADjBM,CFAN,WEAU,KAAKT,kBAAT,EAA6B;ACkBnC,ADjBQ,eAAKA,kBAAL,GAA0B,KAA1B;AFORzB,AGWA,ADjBQ,WFMG,CAACM,GENCC,MFMb,AENQ,CFMcU,AENFT,IFMpB,AENQ,GFMqB,YAAW;AACtC,AGWF,ADjBO,OFMAN,KAAL,CAAWQ,KAAX,GAAmB,IAAnB;AACD,AGWD,ADjBK,CFIL,METI,MAKO;AACL,YAAI,CAAC,KAAKH,MAAL,CAAYL,KAAZ,CAAkBc,MAAvB,EAA+B;AFOrChB,AENQ,WFMG,CAACM,GENCmB,MFMb,CAAsBP,MAAtB,GAA+B,EENvB,GAA0B,IAA1B,GFMkC;AACxC,AENM,OFMDhB,KAAL,CAAWQ,EENAH,GFMX,GAAmB,AENb,CAAYE,IFMlB,CENM;AFOP,AENM,CFIP;AEHK;AACF,eFMYT;;;;;;eEHAoB","file":"assets.8f4429fc.js","sourceRoot":"..","sourcesContent":["function MediaPlayer(config) {\n  this.media = config.el;\n  this.plugins = config.plugins || [];\n\n  this._initPlugins();\n}\n\nMediaPlayer.prototype._initPlugins = function() {\n  const player = {\n    play: () => this.play(),\n    pause: () => this.pause(),\n    media: this.media,\n    get muted() {\n      return this.media.muted;\n    },\n    set muted(value) {\n      this.media.muted = value;\n    }\n  };\n\n  this.plugins.forEach(plugin => {\n    plugin.run(player);\n  });\n};\n\n// MediaPlayer.prototype.play = function() {\n//   this.media.paused ? this.media.play() : this.media.pause();\n// };\n\n// MediaPlayer.prototype.mute = function() {\n//   this.media.muted = !this.media.muted;\n// };\n\nMediaPlayer.prototype.play = function() {\n  this.media.play();\n};\n\nMediaPlayer.prototype.pause = function() {\n  this.media.pause();\n};\n\nMediaPlayer.prototype.toogleplay = function() {\n  if (this.media.paused) {\n    this.play();\n  } else {\n    this.pause();\n  }\n};\n\nMediaPlayer.prototype.mute = function() {\n  this.media.muted = true;\n};\n\nMediaPlayer.prototype.unmute = function() {\n  this.media.muted = false;\n};\n\nexport default MediaPlayer;\n","function AutoPlay() {\n  AutoPlay.prototype.run = function(player) {\n    if (!player.muted) {\n      player.muted = true;\n    }\n    player.play();\n  };\n}\n\nexport default AutoPlay;\n","class AutoPause {\n  constructor() {\n    this.threshold = 0.25;\n    this.handleIntersection = this.handleIntersection.bind(this);\n    this.pausedByScroll = false;\n    this.pausedByVisibility = false;\n    this.handleVisibilityChange = this.handleVisibilityChange.bind(this);\n  }\n\n  run(player) {\n    this.player = player;\n\n    const observer = new IntersectionObserver(this.handleIntersection, {\n      threshold: this.threshold\n    });\n\n    observer.observe(this.player.media);\n    document.addEventListener('visibilitychange', this.handleVisibilityChange);\n  }\n\n  handleIntersection(entries) {\n    const entry = entries[0];\n\n    const isVisible = entry.intersectionRatio >= this.threshold;\n\n    if (isVisible) {\n      if (this.pausedByScroll) {\n        this.pausedByScroll = false;\n        this.player.play();\n      }\n    } else {\n      if (!this.player.media.paused) {\n        this.pausedByScroll = true;\n        this.player.pause();\n      }\n    }\n  }\n\n  handleVisibilityChange() {\n    const isVisible = document.visibilityState === 'visible';\n    if (isVisible) {\n      if (this.pausedByVisibility) {\n        this.pausedByVisibility = false;\n        this.player.play();\n      }\n    } else {\n      if (!this.player.media.paused) {\n        this.pausedByVisibility = true;\n        this.player.pause();\n      }\n    }\n  }\n}\n\nexport default AutoPause;\n","import MediaPlayer from './MediaPlayer.js';\n\nimport AutoPlay from './plugins/Autoplay.js';\n\nimport AutoPause from './plugins/AutoPause.js';\n\nconst video = document.querySelector('video');\nconst player = new MediaPlayer({\n  el: video,\n  plugins: [new AutoPlay(), new AutoPause()]\n});\n\nconst playButton = document.querySelector('#playButton');\nplayButton.onclick = () => player.toogleplay();\n\nconst muteButton = document.querySelector('#muteButton');\nmuteButton.onclick = () => {\n  if (player.media.muted) {\n    player.unmute();\n  } else {\n    player.mute();\n  }\n};\n\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.register('/sw.js').catch(error => {\n    console.log(error.message);\n  });\n}\n// const video = document.querySelector('video')\n// const button = document.querySelector('button')\n\n// function MediaPlayer(config) {\n//   this.media = config.el;\n// }\n\n// MediaPlayer.prototype.togglePlay = function () {\n//   this.media.paused ? this.media.play() : this.media.pause()\n// }\n\n// const player = new MediaPlayer({ el: video })\n// button.onclick = () => player.togglePlay()\n\n// function MediaPlayer(config) {\n//   this.media = config.el;\n// }\n// MediaPlayer.prototype.play = function() {\n//   this.media.play();\n// };\n// MediaPlayer.prototype.pause = function() {\n//   this.media.pause();\n// };\n// MediaPlayer.prototype.togglePlay = function() {\n//   if (this.media.paused) {\n//     this.play();\n//   } else {\n//     this.pause();\n//   }\n// };\n// const video = document.querySelector('video');\n// const player = new MediaPlayer({ el: video });\n// const button = document.querySelector('button');\n// button.onclick = () => player.togglePlay();\n"]}